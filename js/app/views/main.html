<div class="search-container">
  <div class="heading">
    <h1>Search of the Fallen</h1>
    <h2>Full text search for 'Malazan: Book of the Fallen'</h2>
  </div>
  <form>
    <div class="row">
      <div class="small-10 columns">
        <input type="text" ng-model="text" placeholder="Search"/>
      </div>
      <div class="small-2 columns">
        <button id="go" class="button small-12" ng-click="newSearch()">GO</button>
      </div>
    </div>
    <div class="row">
      <div class="small-6 columns">
        <select ng-model="selectedNovel" ng-options="novel as novel.name for novel in novels track by novel.order">
          <option value="" disabled selected>Select a Novel</option>
        </select>
        <label for="selectRows">Rows:
          <select id="selectRows" ng-model="rows" class="search-control">
            <option ng-repeat="count in rowOptions" ng-value="count">{{count}}</option>
          </select>
        </label>
      </div>
      <div class="small-6 columns">
        <select class="chapter-select" ng-model="selectedChapter" ng-disabled="!selectedNovel">
          <option value="" disabled selected>Select a Chapter</option>
          <option ng-repeat="book in bookDropdown" ng-value="book.value" ng-disabled="book.disabled">{{book.title}}</option>
        </select>
        <label for="searchUpTo">Previous Novels:
          <input id="searchUpTo" class="checkbox search-control" type="checkbox" ng-model="upTo"/>
        </label>
      </div>
    </div>

  </form>
</div>
<div ng-show="showResults" class="results-container">
  <p>Page {{currentPage}} of {{pages}}</p>
  <form>
    <div class="row">
      <div class="small-6 columns">
        <button class="float-left button" ng-show="start > 0" ng-click="prevPage()">Previous Page</button>
      </div>
      <div class="small-6 columns">
        <button class="float-right button" ng-show="(start + rows) <= numFound" ng-click="nextPage()">Next Page</button>
      </div>
    </div>
  </form>
  <div id="result" class="result" ng-init="result.isActive = false" ng-click="result.isActive=!result.isActive" ng-repeat="result in results" ng-show="results.length > 0">
    <p ng-show="result.isActive && result.prevText">{{result.prevText}}</p>
    <div ng-bind-html="highlight(result.text)"></div>
    <p ng-show="result.isActive && result.nextText">{{result.nextText}}</p>
    <p>{{resolveChapter(result.chapter)}}</p>
    <p>{{resolveNovel(result.novel)}}</p>
  </div>
  <div class="empty-result" ng-show="results.length < 1">
    <p>No results found.</p>
  </div>
  <p>Page {{currentPage}} of {{pages}}</p>
  <form>
    <div class="row">
      <div class="small-6 columns">
        <button class="float-left button" ng-show="start > 0" ng-click="prevPage()">Previous Page</button>
      </div>
      <div class="small-6 columns">
        <button class="float-right button" ng-show="(start + rows) <= numFound" ng-click="nextPage()">Next Page</button>
      </div>
    </div>
  </form>
</div>
